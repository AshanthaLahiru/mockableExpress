<html>
  <head>
    <title>Domain</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>

    <link href="/styles/viewDomain.css" rel="stylesheet" />
    <script src="/scripts/viewDomain.js"></script>
  </head>

  <body>
    <div class="container">
      <header>
        <div class="row flex-nowrap justify-content-between align-items-center">
          <div class="col-2">
            <img class="mb-4" src="/imgs/logo.png" alt="" height="75" />
          </div>
          <div class="col-8 text-center">
            <div class="row">
              <div class="col-6 statuslabel">
                  Your Server is on
              </div>
              <div class="col-6 status">
                  <%= ip%> : <%= port%>
              </div>
            </div>
          </div>
          <div class="col-2 d-flex justify-content-end align-items-center">
            <a class="btn btn-sm btn-outline-secondary" href="/logout"
              >Sign out</a
            >
          </div>
        </div>
      </header>

      <form
          method="POST"
          action=<%= (typeof editable !== 'undefined' && editable !== null) ? id : 'domain/add'%>
          class="form-inline"
      >
      <div class="form-group row">
          <label for="domainName" class="sr-only">New Domain</label>
          <input
          type="text"
          name="domainName"
          placeholder="New Domain"
          value="<%=  (typeof editable !== 'undefined' && editable !== null)? editable.domain : ''%>"
          class="form-control"
        />
        <button class="btn btn-primary" type="submit">
          Create
        </button>
      </div>   
      </form>
      
      <% if(domains !== null && domains.length !== 0){%>
        <div class="row">
          <table class="table table-hover">
            <thead>
              <tr>
                  <th scope="col">Name</th>
                  <th scope="col">Mocks Count</th>
                  <th scope="col">Actions</th>
              </tr>
            </thead>
            <tbody>
              <% domains.forEach(function(domain,index){ %>
              <tr>
                <th scope="row"><%= domain.domain%></th>
                <td>
                  <p class="domaincount">
                    <%= domain.paths.length%>
                </p>
              </td>
                <td>
                  <button type="button" class="btn btn-primary" onClick="location.href='/domain/paths/<%=index%>'">
                    Manage
                  </button>
                  <button type="button" class="btn btn-success" onClick="location.href='/domain/edit/<%=index%>'">
                    Edit
                  </button>
                  <button type="button" class="btn btn-danger" onClick="deleteDomain(<%=index%>)">
                    Delete
                  </button>
                </td>
              </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
  
        <%} %>
    </div>

    <!-- <form
          method="POST"
          action=<%= (typeof editable !== 'undefined' && editable !== null) ? id : 'domain/add'%>
        >
          <div>
            <h3>Server Status : <%= status%></h3>
            <h4> Runs On <%= ip%>:<%= port%></h4>
          </div>
          <div>
            Domain Name :
            <input
              type="text"
              name="domainName"
              value="<%=  (typeof editable !== 'undefined' && editable !== null)? editable.domain : ''%>"
            />
            <input type="submit" value="Save Domain" />
          </div>
          <% if(domains !== null && domains.length !== 0){%>
          <div>
            <table>
              <thead>
                <th>Name</th>
                <th>Mocks Count</th>
                <th>Actions</th>
              </thead>
              <tbody>
                <% domains.forEach(function(domain,index){ %>
                <tr>
                  <td><%= domain.domain%></td>
                  <td><%= domain.paths.length%></td>
                  <td>
                    <input
                      type="button"
                      onClick="location.href='/domain/paths/<%=index%>'"
                      value="View"
                    />
                    <input
                      type="button"
                      onClick="location.href='/domain/edit/<%=index%>'"
                      value="Edit"
                    />
                    <input
                      type="button"
                      onClick='deleteDomain(<%=index%>)'
                      value="Delete"
                    />
                  </td>
                </tr>
                <% }) %>
              </tbody>
            </table>
          </div>
    
          <%} %>
        </form> -->
  </body>
</html>
